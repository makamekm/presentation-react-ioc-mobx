import {
  CodeSurfer,
  CodeSurferColumns,
  Step,
} from "code-surfer";
import "prismjs/components/prism-tsx";
import "prismjs/components/prism-jsx";
import { github, vsDark } from "@code-surfer/themes";
export const theme = vsDark;
import { Appear, Image } from 'mdx-deck'

import Layout from "./components/layout.tsx";
import EffectImage from "./components/image/index.tsx";
import Panel from "./components/panels/panel.tsx";
import BigPanel from "./components/panels/big-panel.tsx";
import BigBadge from "./components/panels/big-badge.tsx";
import Badge from "./components/panels/badge.tsx";
import VeryBigBadge from "./components/panels/very-big-badge.tsx";
import Formula from "./components/formula.tsx";
import Terminal, { loadingSpinner } from './components/terminal/index.jsx';

import Button from "./examples/style/button.tsx";
import MobxPingPong from "./examples/mobx-redux/mobx-app.jsx";
import TodoAppLayout from "./examples/todo/layouts/index.tsx";
import TodoAppPage from "./examples/todo/pages/index.tsx";

<Layout fade particles logo align="left">

<VeryBigBadge>
  Prototyping Quickly in React
</VeryBigBadge>

> Using prototyping quickly in React

<Formula>> __</Formula>

</Layout>

---

<Layout fade particles logo>

<BigBadge>
  Theory - Tools - Examples
</BigBadge>

<h3>
  # Plan
</h3>

</Layout>

---

<Layout fade particles logo>

# Theory

</Layout>

---

<Layout fade particles logo>

<Panel>
  How to make applications more quickly
</Panel>

<div style={{textAlign: 'center'}}>
  <BigPanel style={{display: 'inline-block'}} color="#2ECC71">
    Motivation
  </BigPanel>
  <h3>
    So let me demonstrate...
  </h3>
</div>

</Layout>

---

<Layout fade particles logo>

<EffectImage src="circle.png" title="Development circle"/>

</Layout>

---

<Layout fade particles logo>

<h1>
  What is project speed?
</h1>

</Layout>

---

<Layout fade particles logo>

<EffectImage src="friction.png" title="Neuton explanation"/>

</Layout>

---

<Layout fade particles logo>

<BigBadge>
  Project Speed
</BigBadge>

<Formula style={{marginTop: "20px"}}>
  V = (Ideas) / (Delta t) - underset(Friction)(F)
</Formula>

</Layout>

---

<Layout fade particles logo>

<EffectImage src="brain.jpg" title="BRAIN"/>

</Layout>

---

<Layout fade particles logo style={{textAlign: "center"}}>

<BigBadge>
  DELAY
</BigBadge>

<BigPanel color="#2ECC71" style={{marginTop: "10px"}}>Instincts (N ms)</BigPanel> + <BigPanel color="#4591EA">Emotions (10 * N)</BigPanel> + <BigPanel>Reason (100 * N)</BigPanel>

</Layout>

---

<Layout fade particles logo>

<EffectImage src="factors.png" title="7 motivating factors and their values"/>

</Layout>

---

<Layout fade particles logo>

<Panel>
  Conclusion
</Panel>

<div style={{display: 'flex', flexDirection: 'column', textAlign: 'left', width: "100%", justifyContent: "center"}}>
  <div style={{fontWeight: 800}}>
    1. Project architecture and tools are crucial
  </div>
  <div style={{fontWeight: 800, marginTop: "20px"}}>
    2. Developers are users
  </div>
</div>

</Layout>

---

<Layout fade particles logo>

# Tools

</Layout>

---

<Layout fade particles logo>

<h2>
  How to develop applications more quickly?
</h2>

</Layout>

---

<Layout fade particles logo>

<div style={{marginBottom: "20px"}}><b>GENERAL PROTOTYPING ISSUES</b></div>

<Badge>
  1. Code refactoring
</Badge>

<Badge>
  2. Structure refactoring
</Badge>

<Badge>
  3. Finding objects
</Badge>

</Layout>

---

<Layout fade particles logo>

<b>Let's make some conclusions...</b>

</Layout>

---

<Layout fade particles logo align="left">

<Panel>
  Architecture should be - <span style={{color: "#2ECC71"}}>Findable</span>
</Panel>

- /shared-components (inputs, buttons, panels, etc.) - <span style={{color: "#2ECC71"}}>Useful</span>
- /components (application parts) - <span style={{color: "#2ECC71"}}>Findable</span>
- /pages (routing) - <span style={{color: "#2ECC71"}}>Findable</span>
- /services (dependency injection) - <span style={{color: "#2ECC71"}}>Usable</span>

</Layout>

---

<Layout fade particles logo>

<Panel>
  TypeScript
</Panel>

Strict types solve <span style={{color: "#2ECC71"}}>Findable, Credible</span> issues

> Even "any" is better than nothing

<div style={{fontSize: "65%", marginTop: "20px", textAlign: "left"}}>
  <b>1. TypeScript makes code easier to read and understand</b><br/>
  2. TypeScript provides highly productive development tools for JavaScript IDEs and practices, like static checking
</div>

</Layout>

---

<Layout fade particles logo>

<Panel>
  Application State
</Panel>

Global state solves <span style={{color: "#2ECC71"}}>Findable, Credible, Useful, Usable</span> issues

> Flux came from ECS (Entity - Component - System Pattern)

</Layout>

---

<Layout fade particles logo>

<Panel>
  Styles (StyleJSX library)
</Panel>

<div>
  Should be <b>incapsulated</b> inside components <span style={{color: "#2ECC71"}}>Findable</span>
  <br/>
  <br/>
  <Button>I am a button!</Button>
</div>

https://github.com/zeit/styled-jsx

</Layout>

---

<Layout fade particles logo>

<EffectImage src="style-jsx-1.png" title="Body"/>

<div style={{marginTop: "30px"}}>
  <EffectImage src="style-jsx-2.png" title="Head"/>
</div>

<div style={{marginTop: "30px"}}>
  # StyleJSX Magic
</div>

</Layout>

---

<Layout fade logo width="100vw" align="left">

<CodeSurfer>

```tsx subtitle="Button with styles in it" file=./examples/style/button.tsx
```

```tsx 8:28 file=./examples/style/button.tsx
```

```tsx 8:19 subtitle="Global styles" file=./examples/style/body.tsx
```

```tsx 8[12:17] file=./examples/style/body.tsx
```

</CodeSurfer>

</Layout>

---

<Layout fade particles logo>

<div style={{marginBottom: "20px"}}><b>GENERAL PROTOTYPING SOLUTIONS</b></div>

<Badge>
  * Code refactoring *<br/>
  <sub>- To be fixed with <b>TypeScript</b> -</sub>
</Badge>

<Badge>
  * Structure refactoring *<br/>
  <sub>- To be fixed with <b>Flux Pattern</b> -</sub>
</Badge>

<Badge>
  * Finding objects *<br/>
  <sub>- To be fixed with <b>Flat Structure</b> -</sub>
</Badge>

</Layout>

---

<Layout fade particles logo>

<Panel>
  The formula of speed
</Panel>

<div style={{textAlign: 'center'}}>
  <BigPanel color="#2ECC71">
    Gatsby + React + IOC + MOBX
  </BigPanel>
</div>

</Layout>

---

<Layout fade particles logo>

| Purpuse | Base | Alternative |
| --- | --- | --- |
| Engine | <BigPanel color="#2ECC71">React</BigPanel> | <BigPanel>Vue</BigPanel> |
| Build | <BigPanel color="#2ECC71">Gatsby</BigPanel> | <BigPanel>NextJS</BigPanel> |
| State | <BigPanel color="#2ECC71">IOC + MobX</BigPanel> | <BigPanel>Redux Observable</BigPanel> |

</Layout>

---

<Layout fade particles logo align="left">

<Badge>Why not VueJS</Badge>

<div style={{fontSize: "65%", marginTop: "20px"}}>
  <b>1. Current versions (1.x, 2.x) of VueJS do not support Typescript</b><br/>
  2. Even with community libraries Vue does not support typing-by-default<br/>
  3. Vue is more heavy than modern react<br/>
  4. Vue is less popolar, look at trandings<br/>
  5. React community is larger and there are thousands of libraries for React<br/>
  6. React is USA Facebook, Vue is China Alibaba<br/>
  7. Vue can be credible built with only NuxtJS, but there are multiple ways to build React with Babel<br/>
  8. One of the best building systems Gatsby support Vue as experimental feature<br/>
  9. Vue does not have any official testing tool. To test Vue you have to use Jest that is developed for React<br/>
</div>

</Layout>

---

<Layout fade particles logo>

## Why not Redux

<div>
  <Badge>Let's look at the ping pong app:</Badge>
  <sub>It sets "is pinging" in 1 second to true</sub>

  <div style={{marginTop: "50px", borderRadius: "10px", border: "1px solid rgba(255, 255, 255, 0.5)", padding: "10px"}}>
    <MobxPingPong/>
  </div>
</div>

</Layout>

---

<Layout fade logo width="100vw" align="left">

<CodeSurferColumns>

  <Step>

  ```jsx subtitle="Mobx" file=./examples/mobx-redux/mobx.jsx
  ```

  ```jsx subtitle="Redux" file=./examples/mobx-redux/redux.jsx
  ```

  </Step>

  <Step subtitle="Storage">

  ```jsx 1:12 file=./examples/mobx-redux/mobx.jsx
  ```

  ```jsx 1:24 file=./examples/mobx-redux/redux.jsx
  ```

  </Step>

  <Step subtitle="Component">

  ```jsx 14:29 file=./examples/mobx-redux/mobx.jsx
  ```

  ```jsx 26:40 file=./examples/mobx-redux/redux.jsx
  ```

  </Step>

  <Step subtitle="Injection">

  ```jsx 20 file=./examples/mobx-redux/mobx.jsx
  ```

  ```jsx 30,37:40 file=./examples/mobx-redux/redux.jsx
  ```

  </Step>

  <Step subtitle="Connection via HOC">

  ```jsx 29 file=./examples/mobx-redux/mobx.jsx
  ```

  ```jsx 37:41 file=./examples/mobx-redux/redux.jsx
  ```

  </Step>

  <Step subtitle="Rendering">

  ```jsx 23:24 file=./examples/mobx-redux/mobx.jsx
  ```

  ```jsx 32:33 file=./examples/mobx-redux/redux.jsx
  ```

  </Step>

  <Step subtitle="Provider">

  ```jsx 31:37,42:44 file=./examples/mobx-redux/mobx.jsx
  ```

  ```jsx 42:53,57:59 file=./examples/mobx-redux/redux.jsx
  ```

  </Step>

</CodeSurferColumns>

</Layout>

---

<Layout fade logo width="100vw" align="left">

<CodeSurfer>

  ```jsx 5:12 subtitle="React IOC" file=./examples/mobx-redux/mobx.jsx
  ```

  ```jsx 16:29 subtitle="Mobx" file=./examples/mobx-redux/mobx.jsx
  ```

  ```jsx 23[25:49] subtitle="Observable Variable" file=./examples/mobx-redux/mobx.jsx
  ```

  ```jsx 24[24:43] subtitle="Observable Action" file=./examples/mobx-redux/mobx.jsx
  ```

  ```jsx 29 subtitle="React Mobx Observer" file=./examples/mobx-redux/mobx.jsx
  ```

</CodeSurfer>

</Layout>

---

<Layout fade particles logo>

<div style={{display: 'flex', flexDirection: 'row', textAlign: 'left', width: "90%", justifyContent: "center"}}>

<EffectImage src="mobx.png" title="Mobx"/>

<EffectImage src="redux.png" title="Redux"/>

</div>

</Layout>

---

<Layout fade particles logo align="left">

<Panel>
  Redux
</Panel>

<div style={{fontSize: "80%", textAlign: "left"}}>
  1. Requires lots of code for simple things<br/>
  2. Does not support typing-by-default
</div>

<Panel>
  MobX
</Panel>

<div style={{fontSize: "80%", textAlign: "left"}}>
  1. Simple, but requires additional libraries like <b>ReactIOC**</b><br/>
  2. Limitations with replacing arrays
</div>

</Layout>

---

<Layout fade particles logo>

<div style={{display: 'flex', flexDirection: 'row', textAlign: 'left', width: "100%", justifyContent: "center"}}>
  <Badge>
    Mobx<br/>
    <BigPanel style={{marginTop: '20px'}} color="#2ECC71"><b>Simple</b></BigPanel>
    <BigPanel style={{marginTop: '20px'}} color="#2ECC71"><b>Mutable</b></BigPanel>
  </Badge>

  <Badge>
    Redux<br/>
    <BigPanel style={{marginTop: '20px'}}><b>Complex</b></BigPanel>
    <BigPanel style={{marginTop: '20px'}}><b>Immutable</b></BigPanel>
  </Badge>
</div>

> It's hard to make connections between multiple immutable objects

</Layout>

---

<Layout fade particles logo>

## Any questions?

<Badge>Before countuing...</Badge>

</Layout>

---

<Layout fade particles logo>

## Build systems

<Badge>NextJS vs GatsbyJS</Badge>

<div style={{marginTop: "30px", textAlign: "left"}}>
  https://www.gatsbyjs.org<br/>
  https://nextjs.org
</div>

</Layout>

---

<Layout fade particles logo>

## Why not NextJS

<Badge>Let's compare the systems' homepages...</Badge>

</Layout>

---

<Layout fade particles logo>

<EffectImage src="nextjs-homepage.png" title="NextJS Homepage"/>

</Layout>

---

<Layout fade particles logo>

<EffectImage src="gatsby-homepage.png" title="GatsbyJS Homepage"/>

</Layout>

---

<Layout fade particles logo align="left">

<BigPanel color="#2ECC71">
  + GatsbyJS static by default<br/>
  + GatsbyJS can be used with any provider<br/>
  + GatsbyJS is for large or small apps<br/>
  + GatsbyJS has templates
</BigPanel>

<BigPanel style={{marginTop: "20px"}}>
  + NextJS isomorphic by default<br/>
  - NextJS can be used only for Zeit provider<br/>
  - NextJS is for small apps<br/>
  - NextJS hasn't templates
</BigPanel>

</Layout>

---

<Layout fade particles logo>

**How to start with Gatsby**

<div>
  <Terminal
    height={500}
    lines={[
      {
        'text': 'npm install -g gatsby-cli',
        'cmd': true,
      },
      loadingSpinner({
        onLoading: 'Installing...',
        onLoad: 'Gatsby has been installed!',
        }),
      {
        'text': 'gatsby new todo-app https://github.com/makamekm/gatsby-starter-typescript-ioc-mobx',
        'cmd': true,
      },
      loadingSpinner({
        onLoading: 'Initializing...',
        onLoad: 'Your app has been initialized!',
      }),
      {
        'text': 'cd todo-app',
        'cmd': true,
      },
      {
        'text': 'npm run start',
        'cmd': true,
      },
      loadingSpinner({
        onLoading: 'Compiling...',
        onLoad: 'Your app is ready at http://localhost:8000/',
      }),
      {
        'text': '',
      },
      {
        'text': '~~~ You are ready to go! ~~~',
      },
    ]}
    interval={20}
  />
</div>

</Layout>

---

<Layout fade particles logo>

**How to deploy your app**

<div>
  <Terminal
    height={500}
    lines={[
      {
        'text': 'npm install -g now',
        'cmd': true,
      },
      loadingSpinner({
        onLoading: 'Installing...',
        onLoad: 'NowJS has been installed!',
        }),
      {
        'text': 'now',
        'cmd': true,
      },
      loadingSpinner({
        onLoading: 'Deploying...',
        onLoad: 'Your app is ready at http://todoapp.me.zeit.com/',
      }),
    ]}
    interval={20}
  />
</div>

</Layout>

---

<Layout fade particles logo>

# Coding Time!

</Layout>

---

<Layout fade particles logo width="100vw">

<div>
  <Badge>Let's look at the to-do app:</Badge>
  <sub>We have to implement an input field and a list of TODOs</sub>

  <div style={{marginTop: "50px"}}>
    <TodoAppLayout>
      <TodoAppPage/>
    </TodoAppLayout>
  </div>
</div>

</Layout>

---

<Layout fade particles logo>

<EffectImage src="structure.png" title="Project structure"/>

</Layout>

---

<Layout fade logo width="100vw" align="left">

<CodeSurfer>

  ```tsx 6 subtitle="Register Service" file=./examples/todo/libs/root.services.dict.ts
  ```

  ```tsx 6[93:103] subtitle="Register TODO Service" file=./examples/todo/libs/root.services.dict.ts
  ```

  ```tsx subtitle="TODO Service" file=./examples/todo/services/todo.service.ts
  ```

  ```tsx 7:11 subtitle="TODO Service [Todo interface]" file=./examples/todo/services/todo.service.ts
  ```

  ```tsx 14:20 subtitle="TODO Service [Observable]" file=./examples/todo/services/todo.service.ts
  ```

  ```tsx 24:47 subtitle="TODO Service [useHook Constructor]" file=./examples/todo/services/todo.service.ts
  ```

  ```tsx 22,25:26 subtitle="TODO Service [Injection]" file=./examples/todo/services/todo.service.ts
  ```

  ```tsx 49:51 subtitle="TODO Service [Computed]" file=./examples/todo/services/todo.service.ts
  ```

  ```tsx 57:65 subtitle="TODO Service [Add todo - Action]" file=./examples/todo/services/todo.service.ts
  ```

  ```tsx 67:72 subtitle="TODO Service [Toggle todo - Action]" file=./examples/todo/services/todo.service.ts
  ```

  ```tsx 74:78 subtitle="TODO Service [Remove todo - Action]" file=./examples/todo/services/todo.service.ts
  ```

  ```tsx subtitle="Index Page" file=./examples/todo/pages/index.tsx
  ```

  ```tsx subtitle="Todo Component" file=./examples/todo/components/todo-root.tsx
  ```

  ```tsx 9:11 subtitle="Todo Component" file=./examples/todo/components/todo-root.tsx
  ```

  ```tsx 7:26 subtitle="Input" file=./examples/todo/components/input.tsx
  ```

  ```tsx 7 subtitle="Input [Injecting]" file=./examples/todo/components/input.tsx
  ```

  ```tsx 8:10,24[19:30] subtitle="Input [OnChange]" file=./examples/todo/components/input.tsx
  ```

  ```tsx 11:16,25[20:28] subtitle="Input [OnAdd]" file=./examples/todo/components/input.tsx
  ```

  ```tsx 26 subtitle="Input [Value]" file=./examples/todo/components/input.tsx
  ```

  ```tsx 6,9:14,18:24 subtitle="List" file=./examples/todo/components/list.tsx
  ```

  ```tsx 9:15,19:25 subtitle="Item" file=./examples/todo/components/todo.tsx
  ```

  ```tsx 9:15 subtitle="Item [Hooks]" file=./examples/todo/components/todo.tsx
  ```

  ```tsx 19:25 subtitle="Item [Render]" file=./examples/todo/components/todo.tsx
  ```

  ```tsx 155 subtitle="Item [memo, observe]" file=./examples/todo/components/todo.tsx
  ```

  ```tsx 11:13 subtitle="Footer" file=./examples/todo/components/footer.tsx
  ```

</CodeSurfer>

</Layout>

---

<Layout fade particles logo width="100vw">

<div style={{minWidth: "600px"}}>
  <TodoAppLayout>
    <TodoAppPage/>
  </TodoAppLayout>
</div>

</Layout>

---

<Layout fade particles logo>

# Final Questions?

</Layout>

---

<Layout fade particles logo>

<EffectImage src="yoda.jpg" title="Thank you!"/>

</Layout>


---

<Layout fade particles logo>

**How to make presentations like this**

<div>
  <Terminal
    height={500}
    lines={[
      {
        'text': 'npm install -g gatsby-cli',
        'cmd': true,
      },
      loadingSpinner({
        onLoading: 'Installing...',
        onLoad: 'Gatsby has been installed!',
        }),
      {
        'text': 'gatsby new my-presentation https://github.com/makamekm/presentation-react-ioc-mobx',
        'cmd': true,
      },
      loadingSpinner({
        onLoading: 'Initializing...',
        onLoad: 'Your app has been initialized!',
      }),
      {
        'text': 'cd my-presentation',
        'cmd': true,
      },
      {
        'text': 'npm run start',
        'cmd': true,
      },
      loadingSpinner({
        onLoading: 'Compiling...',
        onLoad: 'Your app is ready at http://localhost:8000/',
      }),
      {
        'text': '',
      },
      {
        'text': '~~~ You are ready to go at index.mdx! ~~~',
      },
    ]}
    interval={20}
  />
</div>

</Layout>